# 二叉树

- 定义：个数为n的结点的集合，其中每个结点要么是空树，要么有一棵左子树或者右子树或者都有或者都没有
- 二叉树左右子树有次序差别，是有序树
- 几种特殊的二叉树：
    - 满二叉树：除最后一层的结点外，所有结点都有左右子树
        - 若高度为h，则共有2<sup>h</sup>-1个结点
            - 原因：第一层有2<sup>0</sup>个结点，第二层有2<sup>1</sup>个结点...第h层有2<sup>h-1</sup>个结点，等比数列求和得2<sup>h</sup>-1个结点
        - 特点：
            1. 只有最后一层是叶子结点
            2. 没有度为1的结点
            3. 按层序为1从左到右、从上到下进行编号，编号为i的结点左子结点编号为2i，右子结点编号为2i+1，父节点编号为⌊i/2⌋(⌊⌋为向下取整)(除根结点)
    - 完全二叉树：
        - 所有结点满足跟满二叉树的前n个结点编号一一对应的二叉树
        - 即从满二叉树的末尾开始删除0(即为满二叉树，满二叉树是一种特殊的完全二叉树)或若干个结点得来(不从末尾删除会打乱编号)
        - 特点：
            1. 只有最后两层可能出现叶子结点
            2. (重点)最多只有一个度为1的结点(有两个或以上会打乱编号，且这个结点孩子只能为左孩子)
            3. 按层序为1从左到右、从上到下进行编号，编号为i的结点左子结点编号为2i，右子结点编号为2i+1，父节点编号为⌊i/2⌋(⌊⌋为向下取整)(除根结点)
            4. i<=⌊n/2⌋为分支结点，i>⌊n/2⌋为叶子结点(⌊⌋为向下取整)
    - 二叉排序树：
        - 空二叉树，或者所有结点均满足：左子树的关键字小于根结点的关键字，且右子树的关键字大于根结点的关键字的二叉树；每个左子树/右子树又是一棵二叉排序树
        - 便于排序和搜索
    - 平衡二叉树：
        - 除叶子结点外，所有结点左子树和右子树的深度之差不超过1
        - 有更高的搜索效率(让树高度更低)
- 常考性质：
    1. (重点)设二叉树中度数为0,1,2的结点数分别为n<sub>0</sub>,n<sub>1</sub>,n<sub>2</sub>，那么n<sub>0</sub>=n<sub>2</sub>+1

    - 原因：设树的总结点数为n，
    - I.n=n<sub>0</sub>+n<sub>1</sub>+n<sub>2</sub>
    - II.n=n<sub>1</sub>+2n<sub>2</sub>+1
        - 原因：树的总结点数=各结点总度数+1
    - II-I，即得n<sub>0</sub>=n<sub>2</sub>+1

    2. 二叉树第i层至多有2<sup>i-1</sup>个结点(i>=1)
    3. 高度为h的二叉树至多有2<sup>h</sup>-1个结点(即为满二叉树)
- 常考考点：
    1. 具有n(n>0)个结点的完全二叉树的高度为⌈log<sub>2</sub>(n+1)⌉(⌈⌉为向上取整)或⌊log<sub>2</sub>n⌋+1(⌊⌋为向下取整)
        - 原因：
            - 得到⌈log<sub>2</sub>(n+1)⌉:
                - 由于高度为h的满二叉树结点树为2<sup>h</sup>-1，所以设该完全二叉树高度为h，则2<sup>h-1</sup>-1<n<=2<sup>h</sup>
                  -1，即这个数的结点数n必须大于高度为h-1的结点数最多的二叉树，以使这棵树的高度达到h；但是又不能超过高度为h的结点数最多的二叉树，防止高度达到h+1
                - 一系列化简，得h-1<log<sub>2</sub>(n+1)<=h
                - 中间式子向上取整，得h=⌈log<sub>2</sub>(n+1)⌉
            - 得到⌊log<sub>2</sub>n⌋+1:
                - 由于高度为h-1的满二叉树结点树为2<sup>h-1</sup>-1，所以对该高度为h的完全二叉树，它至少要比高度为h-1的满二叉树多一个结点，也就是至少有2<sup>h-1</sup>
                  个结点，但必须少于2<sup>h</sup>个结点，否则高度将到达h+1，即不等式为2<sup>h-1</sup><=n<2<sup>h</sup>
                - 一系列化简，得h-1<=log<sub>2</sub>n<h
                - 中间式子向下取整，得h=⌊log<sub>2</sub>n⌋+1
        - 在完全二叉树中，第i个结点也满足高度为⌈log<sub>2</sub>(i+1)⌉(⌈⌉为向上取整)或⌊log<sub>2</sub>i⌋+1(⌊⌋为向下取整)
    2. 对于完全二叉树，设度数为0,1,2的结点数分别为n<sub>0</sub>,n<sub>1</sub>,n<sub>2</sub>，则：
        1. n<sub>1</sub>为0或1
        2. n<sub>0</sub>=n<sub>2</sub>+1，所以n<sub>0</sub>+n<sub>2</sub>一定为奇数
            - 因此，如果完全二叉树的结点数为2k(k为正整数)，即为偶数，那么可以推出n<sub>0</sub>=k，n<sub>1</sub>=1，n<sub>2</sub>=k-1
                - 原因：因为n<sub>0</sub>+n<sub>2</sub>一定为奇数，所以要保证结点数2k是个偶数，所以n<sub>1</sub>必定是奇数，才能保证奇+奇=偶，去掉了n<sub>1</sub>
                  后，结点数还剩2k-1，由于n<sub>0</sub>=n<sub>2</sub>+1，所以可以推出n<sub>0</sub>=k，n<sub>2</sub>=k-1
            - 同理，如果完全二叉树的结点数为2k-1(k为正整数)，即为奇数，那么可以推出n<sub>0</sub>=k，n<sub>1</sub>=0，n<sub>2</sub>=k-1
- 存储结构：
    1. 顺序存储：
        - 存储方式：每个结点包含数据域和isEmpty字段，将二叉树的结点按照编号存储进数组，并最好将数组的下标0位置空出以保证用于储存结点的下标和编号相同
        - 常用操作，设已知结点编号为i：
            1. 左孩子为2i
            2. 右孩子为2i+1
            3. 父结点为⌊i/2⌋
        - 注意：已知树结点数为n，判断有无左孩子/右孩子/父结点：
            1. 如果是完全二叉树：判断2i是否<=n / 2i+1是否<=n / i是否为1
                - 原因：由于完全二叉树的已用结点编号是连续的，中间没有空缺，所以判断有无孩子只要判断假定孩子的编号是否溢出总结点数，判断有无父结点只要判断它是不是根结点
            2. 如果是非完全二叉树：判断2i/2i+1/⌊i/2⌋的isEmpty属性是否为true
        - 顺序存储只适合存储完全二叉树
          - 原因：最坏情况：当每个结点都只有右孩子时，会造成大量的位置空缺，且如果树高h，仍然需要2<sup>h-1</sup>个结点大小的存储空间
    2. 链式存储(二叉链表)：
        - 存储方式：每个结点包含数据域和指向左孩子和右孩子的指针
        - 设结点数为n，二叉链表一共有n+1个空链域，可以用来构造线索二叉树
           - 原因：每个结点有2个已用或未用的指针，所以一共有2n个指针，又因为除了根结点外，每个结点头上都有一个已用的指针，这样的指针数量为n-1，2n-(n-1)=n+1，即未用的空指针
        - 找到指定结点的孩子结点：直接访问节点中lchild和rchild指针
        - 找到指定结点的父结点：只能从根节点开始遍历
           - 为了方便查找父结点，可以让二叉链表变成三叉链表，即给每个结点加上指向父结点的parent指针
- 先/中/后/序遍历：
  - 